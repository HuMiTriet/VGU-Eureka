# Introduction

Routing is the process of creating points or lines from one location to another location. In our application, to draw the direction from user's location to a friend or to an emergency signal, OSRM routing plugin is used.

OSRM(Open Street Routing Machine) is a free and open source project [[1]](http://project-osrm.org/), which provide the routing engine for Open Street Map. OSRM can be used to generate a road from two or more points.

# How to use

First import the plugin

```dart
import 'package:routing_client_dart/routing_client_dart.dart';
```

To get the road from two points run

```dart
var manager = OSRMManager();
Future<Road> getRoad(LatLng from, LatLng to) async {
    var road = await manager.getRoad(
      waypoints: [
        LngLat(lat: from.latitude, lng: from.longitude),
        LngLat(lat: to.latitude, lng: to.longitude)
      ],
      geometrie: Geometries.geojson,
      steps: true,
      languageCode: 'en',
    );
    return road;
  }
```

With the road object, we can have the following properties:

1. polyline: the list of points to draw the road.
2. distance: the distance of the road.
3. instructions: the instruction that user should follow to reach the destination from started location.
4. duration: estimation time to get to the destination.

# How it works

OSRM uses the Contraction hierachies method which is a hierarchical query algorithm using bidirectional shortest-path search [[3]](https://doi.org/10.1007/978-3-540-68552-4_24). With the Dijkstra's algorithm, the shortest path can be found but in a graph with a lot of nodes (millions of nodes and vertices), it is impractical and slow.

A brief explaination of the method is: The nodes are first ordered by ‘importance’. A hierarchy is then generated by iteratively contracting the least important node. Contracting a node v means replacing shortest paths going through v by shortcuts [[3]](https://doi.org/10.1007/978-3-540-68552-4_24).

# References

1. Open Street Routing Machine, from http://project-osrm.org/
2. routing_client_dart on pub.dev, from https://pub.dev/packages/routing_client_dart
3. Geisberger, R., Sanders, P., Schultes, D., Delling, D. (2008). Contraction Hierarchies: Faster and Simpler Hierarchical Routing in Road Networks. In: McGeoch, C.C. (eds) Experimental Algorithms. WEA 2008. Lecture Notes in Computer Science, vol 5038. Springer, Berlin, Heidelberg. https://doi.org/10.1007/978-3-540-68552-4_24
